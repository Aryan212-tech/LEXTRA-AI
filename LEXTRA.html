
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEXTRA AI - Advanced AI Assistant with Document Upload</title>
    <meta name="description" content="LEXTRA AI - Powerful AI chatbot with document upload, file analysis, and multilingual support. Chat with your documents and get instant answers.">
    <meta name="keywords" content="LEXTRA AI, AI chatbot, document upload, file analysis, AI assistant">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .chat-container {
            height: calc(100vh - 240px);
            overflow-y: auto;
            scroll-behavior: smooth;
        }
        
        .message {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .typing-indicator {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .chat-bubble {
            max-width: 85%;
            word-wrap: break-word;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .modal {
            backdrop-filter: blur(10px);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .chat-container {
                height: calc(100vh - 200px);
            }
            .chat-bubble {
                max-width: 95%;
            }
            .container {
                padding: 0.5rem;
            }
            .message {
                font-size: 14px;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* File upload styles */
        .file-upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #f9fafb;
            transition: all 0.3s ease;
        }
        
        .file-upload-area:hover,
        .file-upload-area.drag-over {
            border-color: #7c3aed;
            background: #f5f3ff;
        }
        
        .uploaded-files {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .file-item {
            background: #e5e7eb;
            border-radius: 6px;
            padding: 8px 12px;
            margin: 4px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="gradient-bg text-white p-4 shadow-lg">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center">
                    <i class="fas fa-robot text-purple-600 text-xl"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold">LEXTRA AI</h1>
                    <p class="text-sm opacity-90">Advanced AI Assistant</p>
                </div>
            </div>
            <div class="flex space-x-2">
                <button onclick="openFileUpload()" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition">
                    <i class="fas fa-upload"></i>
                </button>
                <button onclick="clearChat()" class="bg-white bg-opacity-20 hover:bg-opacity-30 p-2 rounded-lg transition">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Chat Container -->
    <div class="container mx-auto max-w-4xl p-2 md:p-4">
        <div class="bg-white rounded-lg shadow-xl overflow-hidden">
            <!-- Chat Messages Container -->
            <div id="chatContainer" class="chat-container p-4 space-y-4 scrollbar-hide">
                <!-- Welcome Message -->
                <div class="message flex items-start space-x-3">
                    <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <div class="chat-bubble bg-gray-100 p-3 rounded-lg rounded-tl-none">
                        <p class="text-gray-800">‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç LEXTRA AI ‡§π‡•Ç‡§Ç‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•á ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§∏‡§µ‡§æ‡§≤ ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç‡•§ ‡§Ü‡§™ ‡§Ö‡§™‡§®‡•á ‡§°‡•â‡§ï‡•ç‡§Ø‡•Ç‡§Æ‡•á‡§Ç‡§ü ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡§ï‡•á ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§â‡§®‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§≠‡•Ä ‡§™‡•Ç‡§õ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç!</p>
                        <span class="text-xs text-gray-500 block mt-1">‡§Ö‡§≠‡•Ä</span>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="border-t bg-gray-50 p-4">
                <div class="flex space-x-2">
                    <button 
                        onclick="triggerFileUpload()"
                        class="bg-gray-200 hover:bg-gray-300 p-3 rounded-lg transition flex-shrink-0"
                        title="File Upload"
                    >
                        <i class="fas fa-paperclip text-gray-600"></i>
                    </button>
                    <input 
                        type="text" 
                        id="messageInput" 
                        placeholder="‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç..."
                        class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                        onkeypress="handleKeyPress(event)"
                    >
                    <button 
                        onclick="sendMessage()" 
                        id="sendButton"
                        class="bg-purple-600 hover:bg-purple-700 text-white px-4 md:px-6 py-3 rounded-lg transition duration-200 flex items-center space-x-1 md:space-x-2"
                    >
                        <i class="fas fa-paper-plane"></i>
                        <span class="hidden md:inline">‡§≠‡•á‡§ú‡•á‡§Ç</span>
                    </button>
                </div>
                
                <input type="file" id="fileInput" multiple accept=".txt,.pdf,.doc,.docx,.md" style="display: none;" onchange="handleFileUpload(event)">
                
                <!-- Quick Actions -->
                <div class="flex flex-wrap gap-2 mt-3" id="quickActions">
                    <button onclick="sendQuickMessage('AI ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?')" class="bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-full text-sm transition">
                        AI ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?
                    </button>
                    <button onclick="sendQuickMessage('‡§°‡•â‡§ï‡•ç‡§Ø‡•Ç‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§æ ‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂ ‡§¶‡•ã')" class="bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-full text-sm transition">
                        ‡§°‡•â‡§ï‡•ç‡§Ø‡•Ç‡§Æ‡•á‡§Ç‡§ü ‡§∏‡§Æ‡§∞‡•Ä
                    </button>
                    <button onclick="sendQuickMessage('‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à‡§Ç?')" class="bg-green-100 hover:bg-green-200 px-3 py-1 rounded-full text-sm transition">
                        ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§¨‡§ø‡§Ç‡§¶‡•Å
                    </button>
                    <button onclick="sendQuickMessage('‡§ú‡•ã‡§ï ‡§∏‡•Å‡§®‡§æ‡§ì')" class="bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-full text-sm transition">
                        ‡§ú‡•ã‡§ï ‡§∏‡•Å‡§®‡§æ‡§ì
                    </button>
                </div>
            </div>
        </div>

        <!-- File Status Panel -->
        <div class="mt-4">
            <div class="bg-white p-4 rounded-lg shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm text-gray-600">‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡•Ä ‡§ó‡§à ‡§´‡§æ‡§á‡§≤‡•á‡§Ç</p>
                        <p class="text-2xl font-bold text-green-600" id="uploadedFiles">0</p>
                    </div>
                    <i class="fas fa-file text-green-600 text-xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg max-w-md w-full">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold">‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</h3>
                    <button onclick="closeSettings()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                        <input 
                            type="password" 
                            id="apiKeyInput" 
                            placeholder="‡§Ö‡§™‡§®‡•Ä API Key ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç"
                            class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                        >
                        <p class="text-xs text-gray-500 mt-1">Google Gemini API key (AIza... ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§§‡•Ä ‡§π‡•à)</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡§Æ‡•â‡§°‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç</label>
                        <select id="modelSelect" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                            <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                            <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
                            <option value="gemini-pro">Gemini Pro</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡§≠‡§æ‡§∑‡§æ</label>
                        <select id="languageSelect" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                            <option value="en">English</option>
                            <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                            <option value="gu">‡§ó‡•Å‡§ú‡§∞‡§æ‡§§‡•Ä</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-6">
                    <button onclick="saveSettings()" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg transition">
                        ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                    <button onclick="closeSettings()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 rounded-lg transition">
                        ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- File Upload Modal -->
    <div id="fileUploadModal" class="fixed inset-0 bg-black bg-opacity-50 modal hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg max-w-md w-full max-h-[80vh] overflow-hidden">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-bold">‡§°‡•á‡§ü‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</h3>
                    <button onclick="closeFileUpload()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="space-y-4">
                    <div class="file-upload-area" id="uploadArea" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-3"></i>
                        <p class="text-gray-600 mb-2">‡§Ø‡§π‡§æ‡§Å ‡§´‡§æ‡§á‡§≤‡•á‡§Ç ‡§°‡•ç‡§∞‡•à‡§ó ‡§ï‡§∞‡•á‡§Ç ‡§Ø‡§æ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç</p>
                        <p class="text-xs text-gray-500">PDF, TXT, DOC, DOCX, MD ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§π‡•à‡§Ç</p>
                        <button onclick="document.getElementById('fileInput').click()" class="mt-3 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition">
                            ‡§´‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç
                        </button>
                    </div>
                    
                    <div id="uploadedFilesList" class="uploaded-files">
                        <!-- Uploaded files will appear here -->
                    </div>
                </div>
                
                <div class="flex space-x-3 mt-6">
                    <button onclick="processUploadedFiles()" class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition">
                        ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç
                    </button>
                    <button onclick="clearUploadedFiles()" class="flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg transition">
                        ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables with default API key
        let messageCount = 0;
        let chatHistory = [];
        let apiKey = 'AIzaSyDbNufcGte-Fv644uvAo7x-Uq5MCajoEDw';
        let selectedModel = 'gemini-2.0-flash';
        let selectedLanguage = 'hi';
        let uploadedFiles = [];
        let processedData = [];
        const API_ENDPOINT = 'https://generativelanguage.googleapis.com/v1beta/models/';

        // Sample knowledge base
        const knowledgeBase = {
            'ai': 'AI (Artificial Intelligence) ‡§è‡§ï ‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§∏‡§æ‡§á‡§Ç‡§∏ ‡§ï‡•Ä ‡§∂‡§æ‡§ñ‡§æ ‡§π‡•à ‡§ú‡•ã ‡§Æ‡§∂‡•Ä‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§á‡§Ç‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•Ä ‡§§‡§∞‡§π ‡§∏‡•ã‡§ö‡§®‡•á ‡§î‡§∞ ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§¨‡§®‡§æ‡§§‡•Ä ‡§π‡•à‡•§',
            '‡§Æ‡•å‡§∏‡§Æ': '‡§Æ‡•à‡§Ç real-time ‡§Æ‡•å‡§∏‡§Æ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ, ‡§≤‡•á‡§ï‡§ø‡§® ‡§Ü‡§™ weather apps ‡§Ø‡§æ websites ‡§ö‡•á‡§ï ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§',
            '‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó': '‡§ï‡•ã‡§°‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è: 1) Python ‡§Ø‡§æ JavaScript ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡§∞‡•á‡§Ç 2) Online tutorials ‡§¶‡•á‡§ñ‡•á‡§Ç 3) Projects ‡§¨‡§®‡§æ‡§è‡§Ç 4) Practice ‡§ï‡§∞‡§§‡•á ‡§∞‡§π‡•á‡§Ç',
            '‡§ú‡•ã‡§ï': '‡§è‡§ï ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§∞ ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§¨‡•ã‡§≤‡§æ - "‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§∏‡§æ‡§π‡§¨, ‡§Æ‡•Å‡§ù‡•á bug ‡§π‡•à!" ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§¨‡•ã‡§≤‡§æ - "‡§ï‡§π‡§æ‡§Ç ‡§π‡•à?" ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ‡§∞ ‡§¨‡•ã‡§≤‡§æ - "Code ‡§Æ‡•á‡§Ç!" üòÑ',
            'programming': 'Programming ‡§Æ‡•á‡§Ç ‡§Ü‡§™ HTML, CSS, JavaScript, Python, Java ‡§ú‡•à‡§∏‡•Ä ‡§≠‡§æ‡§∑‡§æ‡§è‡§Ç ‡§∏‡•Ä‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§',
            'technology': '‡§Ü‡§ú ‡§ï‡•á ‡§Ø‡•Å‡§ó ‡§Æ‡•á‡§Ç AI, Machine Learning, Blockchain, IoT ‡§ú‡•à‡§∏‡•Ä technologies ‡§¨‡§π‡•Å‡§§ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à‡§Ç‡•§'
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
            updateStats();
        });

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        async function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message === '') return;

            // Disable send button
            const sendButton = document.getElementById('sendButton');
            sendButton.disabled = true;
            sendButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>‡§≠‡•á‡§ú ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</span>';

            // Add user message
            addMessage(message, 'user');
            input.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                let response;
                if (apiKey && apiKey !== 'sk-your-actual-openai-api-key-here') {
                    // Use real API
                    response = await callRealAPI(message);
                } else {
                    // Use demo response
                    response = generateResponse(message);
                }
                
                hideTypingIndicator();
                addMessage(response, 'bot');
                updateStats();
            } catch (error) {
                hideTypingIndicator();
                addMessage('‡§Æ‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç, ‡§ï‡•Å‡§õ ‡§§‡§ï‡§®‡•Ä‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•Å‡§à ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§', 'bot');
                console.error('API Error:', error);
            } finally {
                // Re-enable send button
                sendButton.disabled = false;
                sendButton.innerHTML = '<i class="fas fa-paper-plane"></i> <span>‡§≠‡•á‡§ú‡•á‡§Ç</span>';
            }
        }

        function sendQuickMessage(message) {
            document.getElementById('messageInput').value = message;
            sendMessage();
        }

        function addMessage(message, sender) {
            const chatContainer = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message flex items-start space-x-3';
            
            const time = new Date().toLocaleTimeString('hi-IN', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });

            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex-1"></div>
                    <div class="chat-bubble bg-purple-600 text-white p-3 rounded-lg rounded-tr-none">
                        <p>${message}</p>
                        <span class="text-xs opacity-75 block mt-1">${time}</span>
                    </div>
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <div class="chat-bubble bg-gray-100 p-3 rounded-lg rounded-tl-none">
                        <p class="text-gray-800">${message}</p>
                        <span class="text-xs text-gray-500 block mt-1">${time}</span>
                    </div>
                `;
            }

            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            messageCount++;
            chatHistory.push({ message, sender, time });
        }

        function showTypingIndicator() {
            const chatContainer = document.getElementById('chatContainer');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'message flex items-start space-x-3 typing-indicator';
            typingDiv.innerHTML = `
                <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div class=